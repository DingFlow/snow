<!DOCTYPE html>
<html  lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>DingFlow</title>
    <meta name="description" content="DingFlow">

    <link href="../static/css/steps/jquery.steps.css" th:href="@{/css/steps/jquery.steps.css}" rel="stylesheet">
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/animate.css}" rel="stylesheet"/>
    <link th:href="@{/css/style.css}" rel="stylesheet"/>
    <link th:href="@{/css/skins.css}" rel="stylesheet"/>
    <link th:href="@{/ruoyi/css/ry-ui.css?v=4.3.1}" rel="stylesheet"/>
    <!-- 360浏览器急速模式 -->
    <meta name="renderer" content="webkit">
    <!-- 避免IE使用兼容模式 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="shortcut icon" href="../static/favicon.ico" th:href="@{favicon.ico}"/>
    <style type="text/css">label.error{position:inherit}.ui.horizontal.divider::before,.ui.horizontal.divider::after{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABaAAAAACCAYAAACuTHuKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1OThBRDY4OUNDMTYxMUU0OUE3NUVGOEJDMzMzMjE2NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1OThBRDY4QUNDMTYxMUU0OUE3NUVGOEJDMzMzMjE2NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU5OEFENjg3Q0MxNjExRTQ5QTc1RUY4QkMzMzMyMTY3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU5OEFENjg4Q0MxNjExRTQ5QTc1RUY4QkMzMzMyMTY3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VU513gAAADVJREFUeNrs0DENACAQBDBIWLGBJQby/mUcJn5sJXQmOQMAAAAAAJqt+2prAAAAAACg2xdgANk6BEVuJgyMAAAAAElFTkSuQmCC")}.ui.horizontal.divider::after{background-position:left 1em top 50%}.ui.horizontal.divider::before,.ui.horizontal.divider::after{content:'';display:table-cell;position:relative;top:50%;width:50%;background-repeat:no-repeat}.ui.horizontal.divider::before{background-position:right 1em top 50%}.ui.horizontal.list{display:inline-block;font-size:0}ul.ui.list:last-child,ol.ui.list:last-child,.ui.list:last-child{margin-bottom:0;padding-bottom:0}ul.ui.list,ol.ui.list,.ui.list{list-style-type:none;margin:1em 0;padding:0}.login-oauth__list{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important}.login-login-oauth__container{margin-top:20px}.ui.horizontal.login-login__oauth-title{font-weight:normal}.ui.divider{margin:1.4rem 0rem;line-height:1;height:0;font-weight:bold;text-transform:uppercase;letter-spacing:.05em;color:rgba(0,0,0,0.85);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ui.horizontal.divider{display:table;white-space:nowrap;height:auto;margin:'';line-height:1;text-align:center}.ui.horizontal.list>.item:first-child,.ui.horizontal.list>.item:last-child{padding-top:.3em;padding-bottom:.3em}.ui.horizontal.list>.item:first-child{margin-left:0!important;padding-left:0!important}.login-oauth__list>.item{margin-left:40px!important}.ui.list .item a>img{width:32px;height:32px}</style>
</head>
<body id="page-top" class="landing-page no-skin-config">
<div class="wrapper wrapper-content animated fadeInRight">
    <th:block th:include="include :: front-header" />
    <div class="row" style="margin-top: 50px">
        <h1 style="text-align: center">欢迎注册 <strong>DingFlow 账户</strong></h1>
    </div>
    <div class="row" style="margin-top: 50px">
        <div class="col-sm-12">
            <div class="ibox">
                <div class="ibox-content">
                    <h2>
                        请按步骤完成注册：
                    </h2>
                    <form id="form" action="#" class="wizard-big">

                        <h1>账户</h1>
                        <fieldset>
                            <h2>账户信息</h2>
                            <div class="row">
                                <div class="col-sm-8">
                                    <div class="form-group">
                                        <label><span class="text-danger">*</span>登录名 </label>
                                        <input id="loginName" name="loginName" type="text" class="form-control required">
                                    </div>
                                    <div class="form-group">
                                        <label><span class="text-danger">*</span>密码 </label>
                                        <input id="password" name="password" type="password" class="form-control required">
                                    </div>
                                    <div class="form-group">
                                        <label><span class="text-danger">*</span>确认密码 </label>
                                        <input id="confirm" name="confirm" type="password" class="form-control required">
                                    </div>
                                    <div class="form-group" th:if="${captchaEnabled==true}">
                                        <label><span class="text-danger">*</span>验证码 </label>
                                        <div class="row" >
                                            <div class="col-xs-7">
                                                <input type="text" name="validateCode" class="form-control code"  placeholder="验证码"   maxlength="5" >
                                            </div>
                                            <div class="col-xs-5">
                                                <a href="javascript:void(0);" th:onclick="getImgCode()" title="点击更换验证码">
                                                    <img th:src="@{/captcha/captchaImage(type=${captchaType})}" id="imgcode" width="85%" height="30px"/>
                                                </a>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-4">
                                    <div class="text-center">
                                        <div style="margin-top: 20px">
                                            <i class="fa fa-sign-in" style="font-size: 180px;color: #e5e5e5 "></i>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </fieldset>

                        <h1>个人资料</h1>
                        <fieldset>
                            <h2>个人资料信息</h2>
                            <div class="row">
                                <div class="col-sm-8">
                                    <div class="form-group">
                                        <label><span class="text-danger">*</span>姓名 </label>
                                        <input id="userName" name="userName" type="text" class="form-control required">
                                    </div>
                                   <div class="form-group">
                                        <label><span class="text-danger">*</span>手机号 </label>
                                        <input id="phone" name="phonenumber" type="text" class="form-control required phone">
                                    </div>
                                    <div class="form-group">
                                        <label><span class="text-danger">*</span>邮箱 </label>
                                        <input id="email" name="email" type="text" class="form-control required email">
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="text-center">
                                        <div style="margin-top: 20px">
                                            <i class="fa fa-sign-in" style="font-size: 180px;color: #e5e5e5 "></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                        <h1>网站条约</h1>

                        <fieldset style="overflow:scroll;">
                            <h2>DingFlow网站条约</h2>
                            <p class="desc">
                                请您在注册DingFlow前认真阅读并理解以下条约:
                            </p>
                            <div class="install-txt">
                                <p  class="text-center">版权所有 &copy; 2021-2022,DingFlow保留所有权利。Copyright</p>
                                <p>
                                    &nbsp;您在使用本网站时，即表示您充分理解和同意我们按照本《隐私保护条款》的全部内容。如对本《隐私保护条款》或相关事宜有任何问题，请联系QQ:459816669进行咨询。
                                </p>
                                <h4 class="text-blue text-bold">一、信息收集</h4>
                                <p>
                                    （一）本网站遵循正当、合法、必要的原则，出于本《隐私保护条款》所属的以下目的，收集和使用您在使用本网站过程中主动提供或者因使用服务而产生的信息。如果我们要将您的信息用于本《隐私保护条款》未载明的其他用途，或与其它特定目的收集而来的信息用于其他目的，我们将以合理的方式向您告知，并在使用前征得您的同意。我们提供服务时，可能会收集、存储和使用与您有关的信息。如果您不提供相关信息，可能无法注册成为我们的用户或者无法享受我们提供的某些服务，或者无法达到相关服务拟达到的效果。<br/>
                                    （二）当您匿名访问本网站时，即可访问本网站并获取信息。本网站的系统将自动收集您的IP地址及网站浏览信息，您清楚知悉并同意本网站的信息采集行为。但在使用本网站上部分功能时，本网站需收集您的信息。<br/>
                                    1.向本网站申请政府信息时，您需要向本网站提供申请人姓名、联系电话、证件名称、证件号码、身份证明照片或扫描件、电子邮箱等信息；若您以“法人/其他组织”身份提出政府信息公开申请时，需要向本网站提供法人/组织名称、联系电话、身份证明照片或扫描件、联系人姓名、机构代码、法人代表、电子邮箱等信息。<br/>
                                    2.使用互动交流功能时，您需要向本网站提供姓名、联系方式等信息。<br/>
                                    （三）本网站通过福建省社会用户实名认证和授权平台实现注册、登录。身份认证隐私保护遵循《福建省社会用户实名认证和授权平台用户协议》相关条款。<br/>
                                    （四）当您注册本网站时，您需要向本网站提供您的手机号码、姓名、短信验证码、证件类型、证件号码等信息；若您注册法人账户时，需要向本网站提供您的法人类型、单位名称、统一社会信用代码、许可证编号、法人姓名、法人证件类型、国家/地区、法人证件号码、法人代表人手机号等信息，同时同意本网站通过验证您的身份证信息的方式对有关信息进行有效性核验。<br/>
                                    （五）当您登录本网站时，您需要向本网站提供您的手机号码+登录密码或手机号码+短信验证码或用闽政通APP扫码登录，同时同意本网站对您提供的登录信息进行有效性核验，如您不提供上述信息，本网站将无法向您提供个人中心、收藏、评论、纠错及其它需要登录才能使用的服务。<br/>
                                    （六）当您重置本网站登录密码时，您需要向本网站提供您的手机号码信息，同时同意本网站对手机号码信息进行有效性核验。<br/>
                                    （七）当您完善信息时，您可以根据自身的需求选择性填写或更改您的其它信息，如电子邮箱、地区等信息。但如您不提供此类信息，不会影响您正常注册和登录使用本网站服务。并且没有您的同意，本网站不会泄露该选择性填写信息。
                                </p>
                                <h4 class="text-blue text-bold">二、信息使用</h4>
                                <p>
                                    （一）您向本网站提供的个人信息，本网站将利用技术手段对您的信息进行去标识化、加密或匿名处理，并将可能用于下列用途：<br/>
                                    1.核实用户身份，并提供相应的服务；<br/>
                                    2.执行用户的指示、回应用户或以该用户名义提出的查询、建议或举报内容；<br/>
                                    3.用于编制有关网站使用的流量统计数据；<br/>
                                    4.通过发送短信、电子邮件或以其他方式，告知用户相关信息；<br/>
                                    5.用于用户在提供信息时特别指定的目的，例如参与民意征集、访谈提问、发表评论等。<br/>
                                    （二）在未得到您同意前，本网站不会将用户的任何个人信息提供给任何第三方，但发生以下事由的除外：<br/>
                                    1.与国家安全、国防安全直接相关的； <br/>
                                    2.与公共安全、公共卫生、重大公共利益直接相关的；<br/>
                                    3.有犯罪侦查、起诉、审判和判决执行等直接相关的；<br/>
                                    4.出于维护您或其他个人的生命、财产等重大合法权益但又很难得到您本人同意的；<br/>
                                    5.收集的个人信息是您自行向社会公众公开的；<br/>
                                    6.合法公开披露的信息中收集个人信息的，如合法的新闻报道、政府信息公开等渠道；<br/>
                                    7.法律法规规定、监管要求即行业主管部门有关规定的义务相关的；<br/>
                                    8.为维护本网站的所有权及相关权利的。
                                </p>
                                <h4 class="text-blue text-bold">三、信息共享、转让和公开披露</h4>
                                <p>
                                    （一）共享 <br>
                                    本网站不会与本网站以外的公司、组织和个人共享您的个人信息，但以下情况除外：<br>
                                    1.事先获得您的明示同意。<br>
                                    2.在法定情形下的共享：本网站可能会根据法律法规规定、监管要求、诉讼争议解决需求，或按行政、司法机关依法提出的要求，对外共享您的个人信息。<br>
                                    （二）转让 <br>
                                    本网站不会将您的个人信息转让给任何公司、组织机构和个人。但以下情况除外：<br/>
                                    1.事先获得您的明示同意。<br>
                                    2.根据适用的法律法规、法律程序的要求、强制性的行政或司法要求所必须的情况进行提供。<br>
                                    （三）公开披露 <br>
                                    本网站仅会在以下情况下，公开披露您的个人信息：<br/>
                                    1.获得您的明示同意或基于您的主动选择，本网站可能会公开披露您的个人信息；<br>
                                    2.如果本网站确定您出现违反法律法规或严重违反本网站相关协议规则的情况，或为保护本网站或公众的人身财产安全免遭侵害，本网站可能依据法律法规或本网站相关协议规则公开披露您的个人信息，包括相关违规行为以及本网站已对您采取的措施。<br>
                                    （四）共享、转让、公开披露个人信息时事先征得授权同意的例外<br/>
                                    以下情形中，共享、转让、公开披露您的个人信息无需事先征得您的授权同意：<br/>
                                    1.与国家安全、国防安全直接相关的；<br>
                                    2.与公共安全、公共卫生、重大公共利益直接相关的；<br>
                                    3.有犯罪侦查、起诉、审判和判决执行等直接相关的；<br>
                                    4.出于维护您或其他个人的生命、财产等重大合法权益但又很难得到您本人同意的；<br>
                                    5.收集的个人信息是您自行向社会公众公开的；<br>
                                    6.合法公开披露的信息中收集个人信息的，如合法的新闻报道、政府信息公开等渠道；<br>
                                    7.法律法规规定、监管要求即行业主管部门有关规定的义务相关的；<br>
                                    8.为维护本网站的所有权及相关权利的。<br>
                                </p>
                                <h4 class="text-blue text-bold">四、信息保存</h4>
                                <p>
                                    本网站会按照法律法规规定、监管要求，将收集的个人信息存储于中华人民共和国境内。
                                </p>
                                <p>　
                                    您在使用本网站期间，本网站将持续为您保存您的个人信息。在您注销本网站账户后，本网站仅在法律法规规定、监管要求的期限内，以及为实现本《隐私保护条款》声明的目的所必须的时限内保留您的个人信息。超出上述个人信息保存期限后，本网站会对您的个人信息进行删除或匿名化处理。
                                </p>
                                <h4 class="text-blue text-bold">五、信息安全</h4>
                                本网站努力为您的个人信息安全提供保障,以防止信息的丢失、不当使用、未经授权访问或公开披露。<br>
                                (一)为了保障您的信息安全,本网站将在法律法规相关规定要求和现有技术水平下使用符合业界标准的安全保护措施保护您提供的个人信息,采取物理、技术和行政管理安全措施降低丢失、误用、非授权访问、披露和更改的风险,尽力防止数据遭到未经授权的访问、公开披露、使用、修改、损坏或丢失。<br>
                                (二)本网站建立专门的管理制度、流程和组织以保障信息的安全,严格限制访问信息的人员范围,要求他们遵守保密义务,并进行审计。<br>
                                (三)如因不可抗力或计算机病毒感染、黑客攻击等特殊原因，导致用户信息被破坏、泄密并受到损失的，本网站将采取必要措施尽力减少用户的损失。<br>
                                (四)互联网环境并非百分之百安全,本网站将尽力确保您的个人信息安全性。如果本网站的物理、技术、或管理防护设施遭到破坏,导致发生信息被非授权访问、公开披露、篡改、或毁坏及其它个人信息泄露安全事件,本网站会启动应急预案,阻止安全事件扩大,并以网站公告或消息通知等形式将相关情况告知您。同时,本网站还将按照监管要求,上报个人信息安全事件的处置情况。<br>
                                (五)您在使用本网站时,本网站会通过您的手机号码、姓名、身份证号或者其他身份验证信息来识别您的身份,请您务必妥善保管上述信息。一旦您泄露了上述信息,您的账户信息可能因此泄露,并可能使您的资金安全等个人权益遭受损失。<br>
                                <h4 class="text-blue text-bold">六、用户权利</h4>
                                您可通过本网站的相关网页查看、更新并修改提供给本网站的个人信息，也可以要求本网站删除该信息。<br>
                                <h4 class="text-blue text-bold">七、本《隐私保护条款》如何更新</h4>
                                在相关法律法规发生变化或本网站服务发生变动等必要情形下,本网站如需对本《隐私保护条款》做出修改,将在本网站公布,公布后即生效,并取代此前相关内容。您如不同意新的修改内容,请及时与本网站联系或立即停止使用本《隐私保护条款》约定的服务,如您选择继续使用,则视为您完全同意并接受新的修改内容。<br>
                                <h4 class="text-blue text-bold">八、免责</h4>
                                <p>　
                                本网站对网站上所有由第三方提供的信息、内容和服务，不提供明示或暗示的担保。本网站对使用上述信息、内容和服务所造成的任何损失不承担责任。
                                </p>
                                <h4 class="text-blue text-bold">九、其他</h4>
                                (一)本《隐私保护条款》的成立、生效、履行、解释及纠纷解决,适用中华人民共和国法律；法律无明文规定的,可适用国内通行的惯例。<br>
                                (二)本《隐私保护条款》无论因何种原因部分无效或不可执行,都不影响本条款其它部分的效力。<br>
                                (三)本《隐私保护条款》中未尽事宜,按照法律法规和本网站相关业务规则及国内通行的惯例办理。<br>
                                <p class="text-danger text-bold">
                                <div class="custom-control custom-checkbox custom-control-inline">
                                    <input type="checkbox" class="custom-control-input required" id="agreeOne" name="agree" value="1" >
                                    <label class="custom-control-label font-weight-normal text-primary" for="agree">勾选并同意以上协议</label>
                                </div>
                                </p>
                            </div>
                        </fieldset>

                        <h1>完成</h1>
                        <fieldset style="overflow:scroll;">
                            <h2>DingFlow许可协议</h2>
                            <p class="desc">
                                请您在注册DingFlow前认真阅读并理解以下协议:
                            </p>
                            <div class="install-txt">
                                <p  class="text-center">版权所有 &copy; 2021-2022,DingFlow保留所有权利。Copyright</p>
                                <p>
                                    &nbsp;&nbsp;非常感谢您使用DingFlow系统，DingFlow是一款基于Java 8并使用SpringBoot进行构建的中小企业内部管理系统，
                                    系统默认使用MySQL数据库，内置Markdown文本编辑器，是一款小巧，易用的国产内部企业管理系统，现已开放全部源代码，源码地址:
                                    <a href="https://gitee.com/qimingjin/snow" target="_blank">https://gitee.com/qimingjin/snow</a>
                                </p>
                                <h5 class="text-blue text-bold">一、许可</h5>
                                <p>&nbsp;&nbsp;1.1 如果您是个人用户，可将本软件用于非商业用途，而不必支付软件授权许可费，商业网站则需获得DingFlow商业授权，
                                    例如：政府单位、教育机构、协会团体、企业、以赢利为目的的站点等。<br>
                                    &nbsp;&nbsp;1.2 您可以在本协议的许可范围内，修改DingFlow源代码和界面风格以适应您的要求。<br>
                                    &nbsp;&nbsp;1.3 您拥有使用本软件构建的网站全部内容所有权，并独立承担与这些内容的相关法律义务。<br>
                                    &nbsp;&nbsp;1.4 在获得商业授权之后，您可以将本软件用于商业用途。<br>
                                </p>
                                <h5 class="text-blue text-bold">二、约束和限制</h5>
                                <p>
                                    &nbsp;&nbsp; 2.1 任何在使用了DingFlow的非盈利网站主页上必须加上DingFlow官方网址(https://www.dingflow.yifaoa.top/docs)的链接。<br>
                                    &nbsp;&nbsp; 2.2 在未获取商业授权之前。任何单位和个人均不得将本“软件”用于商业用途（包括但不限于企业网站、政府单位网站、经营性网站、以盈利为目的的网站）
                                    和任何非个人所有的项目中。<br>
                                    &nbsp;&nbsp; 2.3 任何非盈利的个人、单位或组织可自行在本软件的基础上进行二次开发，而无需获取任何授权许可。<br>
                                </p>
                                <h5 class="text-blue text-bold">三、测试版（Beta）</h5>
                                <p>&nbsp;&nbsp; 3.1 测试版“软件”其性能和兼容性均未能达到最终稳定版本级别，将来也存在对“软件”进行重大改进的可能，其仅供测试“软件”使用，请勿用于正式生产环境。</p>
                                <h5 class="text-blue text-bold">四、免责声明</h5>
                                <p>
                                    &nbsp;&nbsp; 4.1 用户完全自愿使用本软件，您必须了解使用本软件的风险，且愿意承担使用本软件的风险。<br>
                                    &nbsp;&nbsp; 4.2  任何情况下，我们不就因使用或不能使用本软件所发生的特殊的、意外的、
                                    非直接或间接的损失承担赔偿责任（包括但不限于，资料损失，资料执行不精确，或因由您或第三人承担的损失，
                                    或本程序无法与其他程序运作等）。即使已经被事先告知该损害发生的可能性。
                                </p>
                                <p class="text-danger text-bold">
                                <div class="custom-control custom-checkbox custom-control-inline">
                                    <input type="checkbox" class="custom-control-input required" id="agree" name="agree" value="1" >
                                    <label class="custom-control-label font-weight-normal text-primary" for="agree">勾选并同意以上协议</label>
                                </div>
                                </p>
                            </div>
                        </fieldset>
                    </form>

            </div>
        </div>

    </div>
    </div>
</div>
<th:block th:include="include :: front-footer" />
<script th:inline="javascript"> var ctx = [[@{/}]]; var captchaType = [[${captchaType}]]; </script>
<!-- 全局js -->
<script src="../static/js/jquery.min.js" th:src="@{/js/jquery.min.js}"></script>

<script src="../static/js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}"></script>
<!-- 验证插件 -->
<script src="../static/js/plugins/staps/jquery.steps.min.js" th:src="@{/js/plugins/staps/jquery.steps.min.js}"></script>
<script src="../static/ajax/libs/validate/jquery.validate.min.js" th:src="@{/ajax/libs/validate/jquery.validate.min.js}"></script>
<script src="../static/ajax/libs/validate/messages_zh.min.js" th:src="@{/ajax/libs/validate/messages_zh.min.js}"></script>
<script src="../static/ajax/libs/layer/layer.min.js" th:src="@{/ajax/libs/layer/layer.min.js}"></script>
<script th:src="@{/ajax/libs/blockUI/jquery.blockUI.js}"></script>
<script src="../static/ruoyi/js/ry-ui.js" th:src="@{/ruoyi/js/ry-ui.js?v=4.3.1}"></script>
    <script th:inline="javascript">
        function getImgCode() {
            var url =  "/captcha/captchaImage?type=" + captchaType + "&s=" + Math.random();
            $("#imgcode").attr("src", url);
        }

        $(document).ready(function(){
         var icon = "<i class='fa fa-times-circle'></i> ";
         $("#form").steps({
             bodyTag:"fieldset",
             transitionEffect: "slideLeft", //设置滑动方向
             enableCancelButton:false,
             stepsOrientation: "vertical",
             //当滑动时的事件，点击上一步下一步时触发
            onStepChanging:function(event,currentIndex,newIndex){
                 if(currentIndex>newIndex){
                    return true
                }if(newIndex===4){
                    return false
                }
                var form=$(this);
                if(currentIndex<newIndex){
                    $(".body:eq("+newIndex+") label.error",form).remove();
                    $(".body:eq("+newIndex+") .error",form).removeClass("error")
                }
                form.validate().settings.ignore=":disabled,:hidden";
                return form.valid()
            },
             //当完成以后触发
            onStepChanged:function(event,currentIndex,priorIndex){
             /*   if(currentIndex===2){
                    $(this).steps("next")
                }
                if(currentIndex===2&&priorIndex===3){
                    $(this).steps("previous")
                }
*/
            },
             //当点击完成是触发
            onFinishing:function(event,currentIndex){
                var form=$(this);
                form.validate().settings.ignore=":disabled";
                return form.valid()
            },
            onFinished:function(event,currentIndex){
               // var form=$(this);
                //提交数据
               // form.submit()
                if ($.validate.form()) {
                    register();
                }
            }
         }).validate({
                errorPlacement: function(error,element){
                    element.before(error)
                },
                onkeyup: false,
                rules:{
                    loginName:{
                        required:true,
                        minlength: 3,
                        remote: {
                            url:ctx +  "system/user/checkLoginNameUnique",
                            type: "post",
                            dataType: "json",
                            data: {
                                "loginName": function() {
                                    return $.common.trim($("#loginName").val());
                                }
                            },
                            dataFilter: function (data, type) {
                                return $.validate.unique(data);
                            }
                        }
                    },
                    password: {
                        required: true,
                        minlength: 5
                    },
                    confirm:{
                        required: true,
                        equalTo:"#password"
                    },
                    validateCode:{
                        required: true,
                    },
                    phonenumber:{
                        required:true,
                        remote: {
                            url:ctx +  "system/user/checkPhoneUnique",
                            type: "post",
                            dataType: "json",
                            data: {
                                "phonenumber": function() {
                                    return $.common.trim($("#phone").val());
                                }
                            },
                            dataFilter: function (data, type) {
                                return $.validate.unique(data);
                            }
                        }
                    },
                    email:{
                        required:true,
                        email:true,
                        remote: {
                            url: ctx + "system/user/checkEmailUnique",
                            type: "post",
                            dataType: "json",
                            data: {
                                "email": function() {
                                    return $.common.trim($("#email").val());
                                }
                            },
                            dataFilter: function (data, type) {
                                return $.validate.unique(data);
                            }
                        }
                    }
                },
             messages: {
                 loginName: {
                     required: icon + "请输入登录名",
                     minlength: icon + "用户名不能小于3个字符",
                     remote: "用户名已经存在"
                 },
                 password: {
                     required: icon + "请输入您的密码",
                     minlength: icon + "密码不能小于5个字符",
                 },
                 confirm: {
                     required: icon + "请再次输入您的密码",
                     equalTo: icon + "两次密码输入不一致"
                 },
                 validateCode:{
                     required: icon + "请输入验证码",
                 },
                 phonenumber:{
                     required: icon +"请输入手机号码",
                     remote:icon + "手机号码已经存在"
                 },
                 email: {
                     required:icon + "请输入邮箱",
                     remote: icon +"Email已经存在"
                 }
             }
            })
        });

        function register(){
            var config = {
                url: "/front/register",
                type: "post",
                dataType: "json",
                data:$('#form').serialize(),
                beforeSend: function () {
                    $.modal.loading("正在处理中，请稍后...");
                },
                success: function(result) {
                    if (typeof callback == "function") {
                        callback(result);
                    }
                    if (result.code == web_status.SUCCESS) {
                        $.modal.alertSuccess("注册成功，即将跳转首页！");
                        setTimeout(function(){
                            location.href ='/front/index';
                        }, 100);
                    } else if (result.code == web_status.WARNING) {
                        $.modal.alertWarning(result.msg)
                    } else {
                        $.modal.alertError(result.msg);
                    }
                    $.modal.closeLoading();
                }
            };
            $.ajax(config)
        }

    </script>
</body>
</html>
